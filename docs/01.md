## ğŸ“QueryDSL

- JPAì—ì„œ ì œê³µí•˜ëŠ” ê°ì²´ì§€í–¥ì¿¼ë¦¬ì¸ JPQL(Java Persistence Query Language)ì„ í†µí•´ ë™ì  ì¿¼ë¦¬ë¥¼ êµ¬ì„±í•˜ë©´ ì½”ë“œê°€ êµ‰ì¥íˆ ë‚œì¡í•´ì§„ë‹¤ëŠ” ê²ƒì„ ëŠë‚„ ìˆ˜ ìˆë‹¤.
- JPQLì€ `ë¬¸ìì—´`ì„ ì‚¬ìš©í•œë‹¤. ë¬¸ìì—´ì„ ì¡°ê±´ì— ë”°ë¼ ì´ì–´ë¶™ì´ëŠ” í˜•ì‹ìœ¼ë¡œ êµ¬ì„±í•˜ê¸° ë•Œë¬¸ì— ìƒê¸°ëŠ” ë¬¸ì œê°€ ìˆë‹¤. ë¬¸ìì—´ì´ê¸°ì—Â **ì˜¤íƒ€ê°€ ë°œìƒí•´ë„ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì—ëŸ¬ë¥¼ ì¡ì•„ì£¼ì§€ ëª»í•œë‹¤.**(ë‹¤ë§Œ, NamedQueryë¥¼ ì‚¬ìš©í•˜ë©´ ê°€ëŠ¥í•˜ë‹¤.) ë˜í•œ ë™ì ì¿¼ë¦¬ë¥¼ êµ¬ì„±í•  ë•Œ, ì¤‘ê°„ì¤‘ê°„ ifë¬¸ì— ì˜í•´ ë¬¸ìì—´ì´ ì¶”ê°€ë˜ê¸° ë•Œë¬¸ì—Â **ê°€ë…ì„±ì´ ë–¨ì–´ì§„ë‹¤.**Â ë”°ë¼ì„œ ì¿¼ë¦¬ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ì–´ë µë‹¤.
- **QueryDSL**ì€ ìœ„ì™€ ê°™ì€ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì¡Œë‹¤. Type-Safeí•œ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì—”í‹°í‹°ì™€ ë§¤í•‘ë˜ëŠ” ì •ì  íƒ€ì… QClassë¥¼ ìƒì„±í•´ ì¿¼ë¦¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì—ˆë‹¤. ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ë¥¼ ì¡ì•„ë‚¼ ìˆ˜ ìˆê³  ë©”ì†Œë“œ ì²´ì´ë‹ì„ í†µí•´ ì¡°ê±´ì„ ë³´ë‹¤ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. ì¦‰, **ë™ì  ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ë•Œ ìš©ì´í•´ì§„ë‹¤**ëŠ” ë§ì´ë‹¤.
- QueryDSLë„ ë‚´ë¶€ì ìœ¼ë¡œëŠ” JPQLë¥¼ êµ¬ì„±í•´ ì¿¼ë¦¬ë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤. ë‹¤ë§Œ, ì‚¬ìš©ìë“¤ì´ í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì¶”ìƒí™”í•´ë†“ì€ JPQL ë¹Œë”ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

<br>


#### ğŸ“Œ IntelliJ Gradle ëŒ€ì‹ ì— ìë°”ë¡œ ë°”ë¡œ ì‹¤í–‰í•˜ê¸°
> ìµœê·¼ IntelliJ ë²„ì „ì€ Gradleë¡œ ì‹¤í–‰ì„ í•˜ëŠ” ê²ƒì´ ê¸°ë³¸ ì„¤ì •ì´ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì‹¤í–‰ì†ë„ê°€ ëŠë¦¬ë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•˜ë©´ ìë°”ë¡œ ë°”ë¡œ ì‹¤í–‰í•˜ë¯€ë¡œ ì¢€ ë” ë¹¨ë¼ì§„ë‹¤.
1. Preferences Build,Execution,Deployment BuildTools Gradle
2. Build and run using: Gradle IntelliJ IDEA
3. Run tests using: Gradle IntelliJ IDEA
   ![](https://velog.velcdn.com/images/hyewon0218/post/12bc54d6-3bb1-4825-b6e9-7373b0d23b5e/image.jpeg)


#### ğŸ“Œ ë™ì‘ í™•ì¸
> - ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰
- ìŠ¤í”„ë§ ë¶€íŠ¸ ë©”ì¸ ì‹¤í–‰ í›„ ì—ëŸ¬í˜ì´ì§€ë¡œ ê°„ë‹¨í•˜ê²Œ ë™ì‘ í™•ì¸(http://localhost:8080)
- í…ŒìŠ¤íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì–´ì„œ spring web ë™ì‘ í™•ì¸(http://localhost:8080/hello)
  ![](https://velog.velcdn.com/images/hyewon0218/post/06c90607-4160-4ea1-9d52-ffa7a1ec10e2/image.jpeg)![](https://velog.velcdn.com/images/hyewon0218/post/3b4a3980-0550-4770-9a3e-b2bbe26e1580/image.jpeg)![](https://velog.velcdn.com/images/hyewon0218/post/73f31cf3-63c4-4aa0-853a-1e13e846a922/image.jpeg)![](https://velog.velcdn.com/images/hyewon0218/post/32a6b26e-ceb7-47b7-977c-6101553a59f8/image.jpeg)

<br>


## ğŸ“Querydsl ì„¤ì •

```java
plugins {
    id 'java'
    id 'org.springframework.boot' version '3.1.5'
    id 'io.spring.dependency-management' version '1.1.3'
}

group = 'study'
version = '0.0.1-SNAPSHOT'

java {
    sourceCompatibility = '17'
}

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    compileOnly 'org.projectlombok:lombok'
    runtimeOnly 'com.h2database:h2'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'

    // Querydsl ì¶”ê°€ (Spring boot 3.x ì´ìƒ)
    implementation 'com.querydsl:querydsl-jpa:5.0.0:jakarta'
    annotationProcessor "com.querydsl:querydsl-apt:${dependencyManagement.importedProperties['querydsl.version']}:jakarta"
    annotationProcessor "jakarta.annotation:jakarta.annotation-api"
    annotationProcessor "jakarta.persistence:jakarta.persistence-api"
}

tasks.named('test') {
    useJUnitPlatform()
}

/**
 * QueryDSL Build Options
 */
def querydslDir = "src/main/generated"

sourceSets {
    main.java.srcDirs += [ querydslDir ]
}

tasks.withType(JavaCompile).configureEach {
    options.getGeneratedSourceOutputDirectory().set(file(querydslDir))
}

clean.doLast {
    file(querydslDir).deleteDir()
}
```

![](https://velog.velcdn.com/images/hyewon0218/post/6d4136a6-a56f-4b11-8cb4-74f53ceee110/image.jpeg)




<br>

## ğŸ“QClass ìƒì„± ë° ì‚­ì œ
### ìƒì„±
- Gradle - Task - other - compileJavaë¥¼ ì‹¤í–‰í•˜ë©´ ëœë‹¤.![](https://velog.velcdn.com/images/hyewon0218/post/979f2d7c-3e01-45b6-a43b-8bb9114a0572/image.jpeg)

- ì•„ë˜ì™€ ê°™ì´ src/main/generated ê²½ë¡œì— QClassê°€ ìƒì„±ëœë‹¤.![](https://velog.velcdn.com/images/hyewon0218/post/62b66ddd-4ead-48ef-b504-33edb935e38b/image.jpeg)

### ì‚­ì œ
- Gradle - Task - build - clean ì„ ì‹¤í–‰í•˜ë©´ ëœë‹¤.
- src/main/generated ë””ë ‰í† ë¦¬ì™€ íŒŒì¼ì´ ì „ë¶€ ì‚­ì œëœë‹¤.![](https://velog.velcdn.com/images/hyewon0218/post/5105c953-6081-4c6a-b43d-7973d1cba041/image.jpeg)


### ì£¼ì˜ì‚¬í•­

- src/main/generated ë””ë ‰í† ë¦¬ëŠ” ê°œë°œí•  ë•Œ í¸ì˜ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì‹¤ì œ ë°°í¬ë¥¼ ìœ„í•´ buildë¥¼ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ë•Œ, ì½”ë“œ ì‹¤í–‰ì„ ìœ„í•´ í•„ìš”í•œ QClassë“¤ì´Â build ë””ë ‰í† ë¦¬ì˜ entityì™€ ê°™ì€ ê²½ë¡œì—Â ì „ë¶€ í¬í•¨ë˜ê¸° ë•Œë¬¸ì— Dockerì™€ ê°™ì€ ì»¨í…Œì´ë„ˆì— generated ë””ë ‰í† ë¦¬ë¥¼ COPYí•´ì„œ ë„£ì„ ì´ìœ ê°€ ì—†ë‹¤.
- ì°¸ê³ : Qíƒ€ì…ì€ ì»´íŒŒì¼ ì‹œì ì— ìë™ ìƒì„±ë˜ë¯€ë¡œ ë²„ì „ê´€ë¦¬(GIT)ì— í¬í•¨í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤. ì•ì„œ ì„¤ì •ì—ì„œ ìƒì„± ìœ„ì¹˜ë¥¼ gradle build í´ë” ì•„ë˜ ìƒì„±ë˜ë„ë¡ í–ˆê¸° ë•Œë¬¸ì— ì´ ë¶€ë¶„ë„ ìì—°ìŠ¤ëŸ½ê²Œ í•´ê²°ëœë‹¤. (ëŒ€ë¶€ë¶„ gradle build í´ë”ë¥¼ gitì— í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.)

## ğŸ“Querydslê²€ì¦
í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¡œ ì‹¤í–‰ ê²€ì¦
![](https://velog.velcdn.com/images/hyewon0218/post/f12ab700-5b72-4a55-a987-a77487fc167e/image.jpeg)![](https://velog.velcdn.com/images/hyewon0218/post/adefd3ff-4dcc-4916-9d3d-d6ca2e88024c/image.jpeg)

- Querydsl Qíƒ€ì…ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ê°€?
- lombokì´ ì •ìƒ ë™ì‘ í•˜ëŠ”ê°€?
> ì°¸ê³ : ìŠ¤í”„ë§ ë¶€íŠ¸ì— ì•„ë¬´ëŸ° ì„¤ì •ë„ í•˜ì§€ ì•Šìœ¼ë©´ h2 DBë¥¼ ë©”ëª¨ë¦¬ ëª¨ë“œë¡œ JVMì•ˆì—ì„œ ì‹¤í–‰í•œë‹¤.

<br>

## ğŸ“**Querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚´í´ë³´ê¸°**

- querydsl-**apt**: Querydsl ê´€ë ¨ ì½”ë“œ **ìƒì„±** ê¸°ëŠ¥ ì œê³µ(ì½”ë“œ ì œë„ˆë ˆì´ì…˜  ë¼ì´ë¸ŒëŸ¬ë¦¬ ex)Qhello )
- querydsl-**jpa**: querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬(ì‹¤ì œ ì½”ë“œ ì œë„ˆë ˆì´ì…˜ì„ ë§Œë“¤ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬)
- **querydsl-apt**ëŠ” ì†ŒìŠ¤ ì½”ë“œ ë ˆë²¨ì—ì„œ Querydsl ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜ë“¤ì„ ì²˜ë¦¬í•˜ê³  ì¿¼ë¦¬ íƒ€ì… í´ë˜ìŠ¤ë“¤ì„ ìƒì„±í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤. ì´ë¥¼ í†µí•´ ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì‘ì„±í•˜ëŠ” ëŒ€ì‹  Java ì½”ë“œë¥¼ í™œìš©í•˜ì—¬ ì»´íŒŒì¼ëŸ¬ê°€ ê²€ì‚¬í•˜ëŠ” ì•ˆì „í•œ ë°©ë²•ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. sourceSetsì— QClassë¥¼ ì €ì¥í•  ê²½ë¡œë¥¼ ì„¤ì •í•´ì£¼ë©´ í•´ë‹¹ ê²½ë¡œì— ì¿¼ë¦¬ íƒ€ì… í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ì¤€ë‹¤.
  ![](https://velog.velcdn.com/images/hyewon0218/post/bdcc2087-6d89-4bbc-b2af-206a0818ef76/image.jpeg)
  í…ŒìŠ¤íŠ¸ì§¤ ë•Œ í¸ë¦¬í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬
  ![](https://velog.velcdn.com/images/hyewon0218/post/33a3527e-3e78-45df-aa3b-eceba79f62e8/image.jpeg)

<br>

## ğŸ“H2 ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì¹˜

ê°œë°œì´ë‚˜ í…ŒìŠ¤íŠ¸ ìš©ë„ë¡œ ê°€ë³ê³  í¸ë¦¬í•œ DB, ì›¹ í™”ë©´ ì œê³µ
```java
choihyewon@choehyewon-ui-noteubug Spring % cd /Users/choihyewon/Desktop/ê°œë°œ/Backend_Spring/Spring/kim-querydsl
choihyewon@choehyewon-ui-noteubug kim-querydsl % cd h2/bin
choihyewon@choehyewon-ui-noteubug bin % chmod 755 h2.sh
choihyewon@choehyewon-ui-noteubug bin % ls -alrth
total 5136
-rw-rw-r--@ 1 choihyewon  staff   105B Sep 16 18:03 h2w.bat
-rwxr-xr-x@ 1 choihyewon  staff   109B Sep 16 18:03 h2.sh
-rw-rw-r--@ 1 choihyewon  staff    98B Sep 16 18:03 h2.bat
-rw-rw-r--@ 1 choihyewon  staff   2.5M Sep 16 18:03 h2-2.2.224.jar
drwxr-xr-x@ 6 choihyewon  staff   192B Oct 24 22:56 .
drwxr-xr-x@ 9 choihyewon  staff   288B Oct 24 22:59 ..
choihyewon@choehyewon-ui-noteubug bin % ./h2.sh
```
![](https://velog.velcdn.com/images/hyewon0218/post/7de0a668-db72-4e0f-a456-63e1fa9b410c/image.jpeg)
![](https://velog.velcdn.com/images/hyewon0218/post/21029990-f90e-4957-9147-743650b17a90/image.jpeg)
<br>ìµœì†Œ í•œë²ˆ
![](https://velog.velcdn.com/images/hyewon0218/post/c2ceba17-7496-46d3-a83d-adb571d13310/image.jpeg)
ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±! â†’ ì—°ê²°ëŠê³ â†’ jdbc:h2:tcp://localhost/~/querydsl ì´ë ‡ê²Œ ì ‘ì†
![](https://velog.velcdn.com/images/hyewon0218/post/8e32a4e1-2541-4ecc-b457-8bef8d385613/image.jpeg)

insert
![](https://velog.velcdn.com/images/hyewon0218/post/c5f975a7-a453-4747-a0c0-8dc9c79e6d6a/image.jpeg)
![](https://velog.velcdn.com/images/hyewon0218/post/9a06bca9-601c-44fd-be30-854f2e76ddb9/image.jpeg)
<br>ì¡°íšŒí–ˆëŠ”ë° ë°ì´í„°ê°€ ì—†ëŠ”ì´ìœ ? í…ŒìŠ¤íŠ¸ì— íŠ¸ëœì­ì…”ë„ì´ ìˆìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ë¡¤ë°±ì„ í•´ë²„ë¦°ë‹¤! â†’ @commit ë‹¬ì•„ì£¼ë©´

![](https://velog.velcdn.com/images/hyewon0218/post/ffdda9ba-34a0-4f98-a14f-a0aa70dbe196/image.jpeg)

ì¿¼ë¦¬íŒŒë¼ë¯¸í„° ë¡œê·¸ ë‚¨ê¸°ê¸° - ìŠ¤í”„ë§ ë¶€íŠ¸ 3.0
```java
implementation 'com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.9.0'
```

![](https://velog.velcdn.com/images/hyewon0218/post/ffd2622e-2c37-4791-9188-ddcbe869447f/image.jpeg)
