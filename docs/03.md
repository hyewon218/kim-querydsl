# ê¸°ë³¸ ë¬¸ë²•
## JPQL vs Querydsl
```java
@Test
// JPQL: ë¬¸ì(ì‹¤í–‰ ì‹œì  ì˜¤ë¥˜ ë°œê²¬)
public void startJPQL() {
    // member1ì„ ì°¾ì•„ë¼.
    String qlString =
        "select m from Member m " +
        "where m.username = :username";

    Member findMember = em.createQuery(qlString, Member.class)
        .setParameter("username", "member1")// íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì§ì ‘ ì²˜ë¦¬
        .getSingleResult();

    assertThat(findMember.getUsername()).isEqualTo("member1");
}
```
```jpaql
select m1_0.member_id,m1_0.age,m1_0.team_id,m1_0.username from member m1_0 where m1_0.username='member1';
```

```java
@Test
// Querydsl: ì½”ë“œ(ì»´íŒŒì¼ ì‹œì  ì˜¤ë¥˜ ë°œê²¬)
public void startQuerydsl() {
    // member1ì„ ì°¾ì•„ë¼.
    //JPAQueryFactory queryFactory = new JPAQueryFactory(em);
    QMember m = new QMember("m");

    Member findMember = queryFactory
        .select(m)
        .from(m)
        .where(m.username.eq("member1"))// íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ìë™ ì²˜ë¦¬
        .fetchOne();

    assertThat(findMember.getUsername()).isEqualTo("member1");
}
```
- EntityManager ë¡œ JPAQueryFactory ìƒì„±
- Querydslì€ JPQL ë¹Œë”
- JPQL: ë¬¸ì(ì‹¤í–‰ ì‹œì  ì˜¤ë¥˜), Querydsl: ì½”ë“œ(ì»´íŒŒì¼ ì‹œì  ì˜¤ë¥˜) 
- JPQL: íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì§ì ‘, Querydsl: íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ìë™ ì²˜ë¦¬
> JPQLì—ì„œ Query Stringì€ ë¬¸ìì—´ë¡œ ì‘ì„±ë˜ì–´ ì‹¤í–‰ì‹œì ì— ì˜¤ë¥˜ë¥¼ ì¡ì„ ìˆ˜ ìˆë‹¤.<br>
> ë”°ë¼ì„œ ì‚¬ìš©ìê°€ í•´ë‹¹ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ëŸ°íƒ€ì„ì— ì˜¤ë¥˜ê°€ ë‚˜ê²Œë˜ëŠ” ìµœì•…ì˜ ê²½ìš°ê°€ ë°œìƒí•œë‹¤.<br>
> ë‹¨, ì¸í…”ë¦¬ì œì´ enterprise ë²„ì „ì„ ì‚¬ìš© ì¤‘ì¸ ê²½ìš°ì—ëŠ” ì–´ëŠì •ë„ì˜ ì˜¤ë¥˜ë¥¼ ì•Œë ¤ì¤€ë‹¤.<br>
> ë˜í•œ, JPQLì€ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì„ ì§ì ‘(.setParameter("username", "member1"))í•˜ëŠ”ë° ë°˜í•´ Querydslì€ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì¤€ë‹¤.

<br>

### JPAQueryFactoryë¥¼ í•„ë“œë¡œ
```java
@SpringBootTest
@Transactional
public class QuerydslBasicTest {
    
    @PersistenceContext
    EntityManager em;
    
    JPAQueryFactory queryFactory;
    
    @BeforeEach
    public void before() {
        queryFactory = new JPAQueryFactory(em);
        //...
    }
    
    @Test
    public void startQuerydsl2() {
    //member1ì„ ì°¾ì•„ë¼.
        QMember m = new QMember("m");
        Member findMember = queryFactory
            .select(m)
            .from(m)
            .where(m.username.eq("member1"))
            .fetchOne();
        assertThat(findMember.getUsername()).isEqualTo("member1");
    }
}
```
> JPAQueryFactoryë¥¼ í•„ë“œë¡œ ì œê³µí•˜ë©´ ë™ì‹œì„± ë¬¸ì œëŠ” ì–´ë–»ê²Œ ë ê¹Œ?<br>
> ë™ì‹œì„± ë¬¸ì œëŠ” JPAQueryFactoryë¥¼ ìƒì„±í•  ë•Œ ì œê³µí•˜ëŠ” EntityManager(em)ì— ë‹¬ë ¤ìˆë‹¤.<br>
> ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” ì—¬ëŸ¬ ì“°ë ˆë“œì—ì„œ ë™ì‹œì— ê°™ì€ EntityManagerì— ì ‘ê·¼í•´ë„, <br>
> íŠ¸ëœì­ì…˜ ë§ˆë‹¤ ë³„ë„ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì—, ë™ì‹œì„± ë¬¸ì œëŠ” ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

<br>

## ê¸°ë³¸ Q-Type í™œìš©
### Qí´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” 2ê°€ì§€ ë°©ë²•
```java
QMember qMember = new QMember("m"); //ë³„ì¹­ ì§ì ‘ ì§€ì •
QMember qMember = QMember.member; //ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©
```
### ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ static importì™€ í•¨ê»˜ ì‚¬ìš©
```java
import static study.querydsl.entity.QMember.*;
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/406cb3b8-73d4-4925-a0cb-308f2ab25c6c" width="60%"/><br>
> ì°¸ê³ : ê°™ì€ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë©´ ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì
### ë‹¤ìŒ ì„¤ì •ì„ ì¶”ê°€í•˜ë©´ ì‹¤í–‰ë˜ëŠ” JPQLì„ ë³¼ ìˆ˜ ìˆë‹¤.
```yaml
spring.jpa.properties.hibernate.use_sql_comments: true  
```

```sql
/* select
        member1 
    from
        Member member1 // jpqlì˜ alias(ê°™ì€ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼í•˜ëŠ” ê²½ìš°ì—ë§Œ ì„ ì–¸í•´ì„œ ì”€) : public static final QMember member = new QMember("member1");
    where
        member1.username = ?1 */ select
            m1_0.member_id,
            m1_0.age,
            m1_0.team_id,
            m1_0.username 
        from
            member m1_0 
        where
            m1_0.username=?
```
ìœ„ ì‚¬ì§„ì—ì„œ `"member1"`(=alias)ì¸ ì´ìœ ëŠ”<br>
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/19184a83-c012-4038-8a51-8f9e07fa8a48" width="60%"/><br>
> `new QMember("")`ë¥¼ í†µí•´ ìƒˆë¡œìš´ aliasë¡œ ìƒì„±í•´ì£¼ëŠ” ê²ƒì´ ì•„ë‹Œ <br>
> QTypeì— ë‚´ì¥ëœ static í•„ë“œë¥¼ í†µí•´ QTypeë¥¼ ìƒì„±í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ë™ì¼í•œ aliasë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì´ë‹¤.<br>
> ë”°ë¼ì„œ ê°™ì€ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼í•˜ëŠ” ê²½ìš°ì—ëŠ” QTypeì— ë‚´ì¥ëœ static í•„ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì§ì ‘ ìƒì„±í•˜ì—¬ aliasë¥¼ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤.

<br>

## ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬
```java
@Test
// ê¸°ë³¸ ê²€ìƒ‰ ì¿¼ë¦¬
public void search() {
    Member findMember = queryFactory
        .selectFrom(member)
        .where(member.username.eq("member1").and(member.age.between(10, 30)))
        .fetchOne();
        
    assertThat(findMember.getUsername()).isEqualTo("member1");
}

@Test
// AND ì¡°ê±´ì„ íŒŒë¼ë¯¸í„°ë¡œ ì²˜ë¦¬
public void searchAndParam() {
    List<Member> result1 = queryFactory
        .selectFrom(member)
        .where(member.username.eq("member1"),member.age.eq(10))
        .fetch();
    
    assertThat(result1.size()).isEqualTo(1);
}
```
- ê²€ìƒ‰ ì¡°ê±´ì€ .and(), .or() ë¥¼ ë©”ì„œë“œ ì²´ì¸ìœ¼ë¡œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤.
- where()ì— íŒŒë¼ë¯¸í„°ë¡œ ê²€ìƒ‰ì¡°ê±´ì„ ì¶”ê°€í•˜ë©´ AND ì¡°ê±´ì´ ì¶”ê°€ë¨
- ì°¸ê³ : select , from ì„ selectFrom ìœ¼ë¡œ í•©ì¹  ìˆ˜ ìˆìŒ

### JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ê²€ìƒ‰ ì¡°ê±´ ì œê³µ
```java
member.username.eq("member1") // username = 'member1'
member.username.ne("member1") //username != 'member1'
member.username.eq("member1").not() // username != 'member1'
        
member.username.isNotNull() //ì´ë¦„ì´ is not null
        
member.age.in(10, 20) // age in (10,20)
member.age.notIn(10, 20) // age not in (10, 20)
member.age.between(10,30) //between 10, 30
        
member.age.goe(30) // age >= 30
member.age.gt(30) // age > 30
member.age.loe(30) // age <= 30
member.age.lt(30) // age < 30
        
member.username.like("member%") //like ê²€ìƒ‰
member.username.contains("member") // like â€˜%member%â€™ ê²€ìƒ‰
member.username.startsWith("member") //like â€˜member%â€™ ê²€ìƒ‰
...
```

## ê²°ê³¼ì¡°íšŒ
- `fetch()` : ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ, ë°ì´í„° ì—†ìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
- `fetchOne()` : ë‹¨ ê±´ ì¡°íšŒ
    - ê²°ê³¼ê°€ ì—†ìœ¼ë©´ : null
    - ê²°ê³¼ê°€ ë‘˜ ì´ìƒì´ë©´ : com.querydsl.core.NonUniqueResultException
- `fetchFirst()` : limit(1).fetchOne()
- `fetchResults()` : í˜ì´ì§• ì •ë³´ í¬í•¨, total count ì¿¼ë¦¬ ì¶”ê°€ ì‹¤í–‰ -> Deprecated
- `fetchCount()` : count ì¿¼ë¦¬ë¡œ ë³€ê²½í•´ì„œ count ìˆ˜ ì¡°íšŒ -> Deprecated
```java
@Test
public void resultFetch() {
    // List
    List<Member> fetch = queryFactory
        .selectFrom(member)
        .fetch();

    // ë‹¨ ê±´
    Member findMember1 = queryFactory
        .selectFrom(member)
        .fetchOne();

    // ì²˜ìŒ í•œ ê±´ ì¡°íšŒ
    Member findMember2 = queryFactory
        .selectFrom(member)
        .fetchFirst();// == .limit(1).fetchOne()

    // í˜ì´ì§•ì—ì„œ ì‚¬ìš©
    QueryResults<Member> results = queryFactory
        .selectFrom(member)
        .fetchResults();

    // count ì¿¼ë¦¬ë¡œ ë³€ê²½
    long count = queryFactory
        .selectFrom(member)
        .fetchCount();
    }
```
`fetchResults()`
- getTotal, getLimit, getOffsetì„ ì œê³µ -> count ì¿¼ë¦¬ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ 2ê°œì˜ ì¿¼ë¦¬ ë°œìƒ
- paging Queryê°€ ë³µì¡í•´ì§€ë©´ contentsë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ì™€ count ì¿¼ë¦¬ê°€ ë‹¬ë¼ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.(ì„±ëŠ¥ ì´ìŠˆ) -> ë³µì¡í•˜ê³  ì„±ëŠ¥ì´ ì¤‘ìš”í•œ í˜ì´ì§• ì²˜ë¦¬ì˜ ê²½ìš° ë”°ë¡œ ì¿¼ë¦¬ë¥¼ ë‚ ë ¤ì¤˜ì•¼ í•œë‹¤.
- Deprecated ë˜ì—ˆìœ¼ë¯€ë¡œ fetchë¥¼ í†µí•´ contentë¥¼ ì¡°íšŒí•˜ê³  count Queryë¥¼ í†µí•´ total countë¥¼ ë‹¤ì‹œ ì¡°íšŒí•´ì•¼ í•œë‹¤.

`fetchCount()`
- ê°œë°œìê°€ ì‘ì„±í•œ select ì¿¼ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ countìš© ì¿¼ë¦¬ë¥¼ ë‚´ë¶€ì—ì„œ ë§Œë“¤ì–´ì„œ ì‹¤í–‰í•œë‹¤.
- ë”°ë¼ì„œ ë‹¨ìˆœí•œ ì¿¼ë¦¬ì—ì„œëŠ” ì˜ ë™ì‘í•˜ì§€ë§Œ, ë³µì¡í•œ ì¿¼ë¦¬ì—ì„œëŠ” ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.

```java
@Test
public void count() {
    Long totalCount = queryFactory
    //.select(Wildcard.count) //select count(*)
    .select(member.count()) //select count(member.id)
    .from(member)
    .fetchOne();
    System.out.println("totalCount = " + totalCount);
}
```
- count(*) ì„ ì‚¬ìš©í•˜ê³  ì‹¶ìœ¼ë©´ ì˜ˆì œì˜ ì£¼ì„ì²˜ëŸ¼ Wildcard.count ë¥¼ ì‚¬ìš©í•˜ë©´ëœë‹¤.
- member.count() ë¥¼ ì‚¬ìš©í•˜ë©´ count(member.id) ë¡œ ì²˜ë¦¬ëœë‹¤.
- ì‘ë‹µ ê²°ê³¼ëŠ” ìˆ«ì í•˜ë‚˜ì´ë¯€ë¡œ fetchOne() ì„ ì‚¬ìš©í•œë‹¤.

<br>

## ì •ë ¬
- íšŒì› ì •ë ¬ ìˆœì„œ
  - 1. íšŒì› ë‚˜ì´ ë‚´ë¦¼ì°¨ìˆœ(desc)
  - 2. íšŒì› ì´ë¦„ ì˜¤ë¦„ì°¨ìˆœ(asc)
  - ë‹¨ 2ì—ì„œ íšŒì› ì´ë¦„ì´ ì—†ìœ¼ë©´ ë§ˆì§€ë§‰ì— ì¶œë ¥(nulls last)
```java
    @Test
    public void sort() {
        em.persist(new Member(null, 100));
        em.persist(new Member("member5", 100));
        em.persist(new Member("member6", 100));

        List<Member> result = queryFactory
            .selectFrom(member)
            .where(member.age.eq(100))
            .orderBy(member.age.desc(), member.username.asc().nullsLast())
            .fetch();

        Member member5 = result.get(0);
        Member member6 = result.get(1);
        Member memberNull = result.get(2);

        assertThat(member5.getUsername()).isEqualTo("member5");
        assertThat(member6.getUsername()).isEqualTo("member6");
        assertThat(memberNull.getUsername()).isNull();
    }
```
- desc() , asc() : ì¼ë°˜ ì •ë ¬
- nullsLast() , nullsFirst() : null ë°ì´í„° ìˆœì„œ ë¶€ì—¬

<br>

## í˜ì´ì§•
### ì¡°íšŒ ê±´ìˆ˜ ì œí•œ
```java
    @Test
    public void paging1() {
        List<Member> result = queryFactory
                .selectFrom(member)
                .orderBy(member.username.desc()) // member4, member3, member2, member1
                .offset(1) // ì•ì—ì„œ ëª‡ê°œë¥¼ skip? -> 0ë¶€í„° ì‹œì‘ì´ë¯€ë¡œ 1ì´ë©´ 1ê°œë¥¼ skip -> member3, member2, member1
                .limit(2) // member3, member2
                .fetch();

        assertThat(result.size()).isEqualTo(2);
    }
```
### ì „ì²´ ì¡°íšŒ ìˆ˜ê°€ í•„ìš”í•˜ë©´?
```java
@Test
public void paging2() {
        QueryResults<Member> fetchResults = queryFactory
                .selectFrom(member)
                .orderBy(member.username.desc()) // member4, member3, member2, member1
                .offset(1) // ì•ì—ì„œ ëª‡ê°œë¥¼ skip? -> 0ë¶€í„° ì‹œì‘ì´ë¯€ë¡œ 1ì´ë©´ 1ê°œë¥¼ skip -> member3, member2, member1
                .limit(2) // member3, member2
                .fetchResults();

        // ìœ„ ì½”ë“œëŠ” Deprecated ì•„ë˜ì™€ ê°™ì´ ë‚˜ëˆ ì„œ ì‘ì„±í•˜ì.
        List<Member> result = queryFactory
                .selectFrom(member)
                .orderBy(member.username.desc()) // member4, member3, member2, member1
                .offset(1) // ì•ì—ì„œ ëª‡ê°œë¥¼ skip? -> 0ë¶€í„° ì‹œì‘ì´ë¯€ë¡œ 1ì´ë©´ 1ê°œë¥¼ skip -> member3, member2, member1
                .limit(2) // member3, member2
                .fetch();

        long count = queryFactory
                .select(member.count())
                .from(member)
                .fetchOne();

        assertThat(fetchResults.getTotal()).isEqualTo(4);
        assertThat(fetchResults.getResults().size()).isEqualTo(2);

        assertThat(count).isEqualTo(4);
        assertThat(result.size()).isEqualTo(2);
        }
```
- `fetchResults()` :  ì£¼ì˜: count ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ë‹ˆ ì„±ëŠ¥ìƒ ì£¼ì˜!
-  ì°¸ê³ : ì‹¤ë¬´ì—ì„œ í˜ì´ì§• ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ë•Œ, ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ëŠ” ì—¬ëŸ¬ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼ í•˜ì§€ë§Œ, <br>
count ì¿¼ë¦¬ëŠ” ì¡°ì¸ì´ í•„ìš” ì—†ëŠ” ê²½ìš°ë„ ìˆë‹¤. <br>
ê·¸ëŸ°ë° ì´ë ‡ê²Œ ìë™í™”ëœ count ì¿¼ë¦¬ëŠ” ì›ë³¸ ì¿¼ë¦¬ì™€ ê°™ì´ ëª¨ë‘ ì¡°ì¸ì„ í•´ë²„ë¦¬ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì´ ì•ˆë‚˜ì˜¬ ìˆ˜ ìˆë‹¤. <br>
count ì¿¼ë¦¬ì— ì¡°ì¸ì´ í•„ìš”ì—†ëŠ” ì„±ëŠ¥ ìµœì í™”ê°€ í•„ìš”í•˜ë‹¤ë©´, count ì „ìš© ì¿¼ë¦¬ë¥¼ ë³„ë„ë¡œ ì‘ì„±í•´ì•¼ í•œë‹¤.

<br>

## ì§‘í•©
### ì§‘í•© í•¨ìˆ˜
```java
    /**
 * JPQL
 * select
 * COUNT(m), //íšŒì›ìˆ˜
 * SUM(m.age), //ë‚˜ì´ í•©
 * AVG(m.age), //í‰ê·  ë‚˜ì´
 * MAX(m.age), //ìµœëŒ€ ë‚˜ì´
 * MIN(m.age) //ìµœì†Œ ë‚˜ì´ 
 * from Member m
 */
@Test
public void aggregation() {
    
        List<Tuple> result = queryFactory
            .select(member.count(),
                member.age.sum(),
                member.age.avg(),
                member.age.max(),
                member.age.min())
            .from(member)
            .fetch();

        Tuple tuple = result.get(0);

        assertThat(tuple.get(member.count())).isEqualTo(4);
        assertThat(tuple.get(member.age.sum())).isEqualTo(100);
        assertThat(tuple.get(member.age.avg())).isEqualTo(25);
        assertThat(tuple.get(member.age.max())).isEqualTo(40);
        assertThat(tuple.get(member.age.min())).isEqualTo(10);
}
```
- JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ì§‘í•© í•¨ìˆ˜ë¥¼ ì œê³µí•œë‹¤.
- tupleì€ í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ë°˜í™˜ì—ì„œ ì„¤ëª…í•œë‹¤.
- ë°ì´í„° íƒ€ì…ì´ ì—¬ëŸ¬ê°œì¸ ê²½ìš° Querydslì€ Tuple íƒ€ì…ìœ¼ë¡œ ì œê³µí•œë‹¤.
- ì‹¤ë¬´ì—ì„œëŠ” Tupleì„ ì˜ ì‚¬ìš©í•˜ì§€ ì•Šê³  Dtoë¥¼ í†µí•´ ì§ì ‘ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.

### GroupBy ì‚¬ìš©
íŒ€ì˜ ì´ë¦„ê³¼ ê° íŒ€ì˜ í‰ê·  ì—°ë ¹ì„ êµ¬í•´ë¼.
```java
    @Test
    public void group() {

        List<Tuple> result = queryFactory
                .select(team.name,member.age.avg())
                .from(member)
                .join(member.team, team) // memberì— ìˆëŠ” teamì„ join í•´ì¤€ë‹¤.
                .groupBy(team.name) // teamì˜ ì´ë¦„ìœ¼ë¡œ grouping
                .fetch();

        Tuple teamA = result.get(0);
        Tuple teamB = result.get(1);

        assertThat(teamA.get(team.name)).isEqualTo("teamA");
        assertThat(teamA.get(member.age.avg())).isEqualTo(15);
        
        assertThat(teamB.get(team.name)).isEqualTo("teamB");
        assertThat(teamB.get(member.age.avg())).isEqualTo(35);
    }
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/08cc37df-41e1-4167-a6e2-babc81244da1" width="60%"/><br>
groupBy , ê·¸ë£¹í™”ëœ ê²°ê³¼ë¥¼ ì œí•œí•˜ë ¤ë©´ having

### groupBy(), having() ì˜ˆì‹œ
```java
â€¦
.groupBy(item.price) // ì•„ì´í…œì˜ ê°€ê²©ìœ¼ë¡œ grouping
.having(item.price.gt(1000)) // havingì„ í†µí•´ groupingëœ ê²°ê³¼ì—ì„œ 1000ì› ì´ìƒì¸ ì•„ì´í…œë§Œ ì œí•œ
â€¦
```

<br>

## ì¡°ì¸ - ê¸°ë³¸ ì¡°ì¸
### ê¸°ë³¸ ì¡°ì¸
ì¡°ì¸ì˜ ê¸°ë³¸ ë¬¸ë²•ì€ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ì¡°ì¸ ëŒ€ìƒì„ ì§€ì •í•˜ê³ , ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë³„ì¹­(alias)ìœ¼ë¡œ ì‚¬ìš©í•  Q íƒ€ì…ì„ ì§€ì •í•˜ë©´ ëœë‹¤.
```
join(ì¡°ì¸ ëŒ€ìƒ, ë³„ì¹­ìœ¼ë¡œ ì‚¬ìš©í•  Qíƒ€ì…)
```
```java
    /**
     * íŒ€ Aì— ì†Œì†ëœ ëª¨ë“  íšŒì›
     */
    @Test
    public void join() {
        // ê¸°ë³¸ ì¡°ì¸
        List<Member> result = queryFactory
            .selectFrom(member)
            .leftJoin(member.team, team)
            .where(team.name.eq("teamA"))
            .fetch();

        assertThat(result)
            .extracting("username")
            .containsExactly("member1", "member2");
    }
```
- join() , innerJoin() : ë‚´ë¶€ ì¡°ì¸(inner join)
- leftJoin() : left ì™¸ë¶€ ì¡°ì¸(left outer join)
- rightJoin() : rigth ì™¸ë¶€ ì¡°ì¸(rigth outer join)
- JPQLì˜ on ê³¼ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ fetch ì¡°ì¸ ì œê³µ -> ë‹¤ìŒ on ì ˆì—ì„œ ì„¤ëª…

```java
    @Test
    public void leftJoin() throws Exception {
        List<Tuple> results = queryFactory
                .select(
                        member.id,
                        member.username,
                        team.name
                )
                .from(member)
                .leftJoin(team).on(member.id.eq(team.id))
                .fetch();

        for (Tuple tuple : results) {
            System.out.println(tuple.get(team.name));
        }
    }
```
ìœ„ì˜ leftjoin()ì„ join()ìœ¼ë¡œ ë°”ê¾¸ê²Œ ë˜ë©´ onì ˆì— ì¡°ê±´ì— ë¶€í•©í•˜ì§€ ì•ŠëŠ” ë°ì´í„°ëŠ” ê°€ì ¸ì˜¤ì§€ ì•ŠëŠ”ë‹¤.

### ì„¸íƒ€ ì¡°ì¸
ì—°ê´€ê´€ê³„ê°€ ì—†ëŠ” í•„ë“œë¡œ ì¡°ì¸
```java
 /**
 * íšŒì›ì˜ ì´ë¦„ì´ íŒ€ ì´ë¦„ê³¼ ê°™ì€ íšŒì› ì¡°íšŒ
 */
    @Test
    public void theta_join() {
        em.persist(new Member("teamA"));
        em.persist(new Member("teamB"));
        em.persist(new Member("teamC"));

        List<Member> result = queryFactory
            .select(member)
            .from(member, team)// ê¸°ì¡´: member.team, team -> member, team -> memberì™€ teamì„ ëª¨ë‘ ê°€ì ¸ì˜¨ í›„ whereì ˆì„ í†µí•´ í•„í„°ë§í•˜ëŠ” ë°©ë²•
            .where(member.username.eq(team.name))
            .fetch();

        assertThat(result)
            .extracting("username")
            .containsExactly("teamA", "teamB");
        }
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/66a2f015-29d3-4017-920a-0ed4b3540d0c" width="60%"/><br>
- from ì ˆì— ì—¬ëŸ¬ ì—”í‹°í‹°ë¥¼ ì„ íƒí•´ì„œ ì„¸íƒ€ ì¡°ì¸
- ì™¸ë¶€ ì¡°ì¸ ë¶ˆê°€ëŠ¥ ë‹¤ìŒì— ì„¤ëª…í•  ì¡°ì¸ onì„ ì‚¬ìš©í•˜ë©´ ì™¸ë¶€ ì¡°ì¸ ê°€ëŠ¥

## ì¡°ì¸ - onì ˆ
ONì ˆì„ í™œìš©í•œ ì¡°ì¸(JPA 2.1ë¶€í„° ì§€ì›)
1. ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§
2. ì—°ê´€ê´€ê³„ ì—†ëŠ” ì—”í‹°í‹° ì™¸ë¶€ ì¡°ì¸

<br>

1. ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§<br>
- ì˜ˆ : íšŒì›ê³¼ íŒ€ì„ ì¡°ì¸í•˜ë©´ì„œ íŒ€ ì´ë¦„ì´ teamAì¸ íŒ€ë§Œ ì¡°ì¸, íšŒì›ì€ ëª¨ë‘ ì¡°íšŒ<br>
- JPQL : select m, t from Member m left join m.team t on t.name = 'teamA'<br>
- SQL : select m.*, t.* from Member m left join Team t on m.team_id=t.id and t.name='teamA'
```java
    @Test
    public void join_on_filtering() {
        List<Tuple> result = queryFactory
            .select(member, team)
            .from(member)
            // left joinì´ê¸° ë•Œë¬¸ì— memberë¥¼ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  member ë°ì´í„°ëŠ” ê°€ì ¸ì˜¨ë‹¤.
            // ê¸°ë³¸ì ìœ¼ë¡œ memberì˜ ì•„ì´ë””ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í…Œì´ë¸”ì„ ìƒì„±
            .leftJoin(member.team, team).on(team.name.eq("teamA"))
            //.join(member.team, team).where(team.name.eq("teamA"))// ë‚´ë¶€ì¡°ì¸ì¼ ë•Œ where, on ê¸°ëŠ¥ ë™ì¼
            .fetch();

        for (Tuple tuple : result) {
            System.out.println("tuple = " + tuple);
        }
    }
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/9acafff8-c361-46ee-82be-aaaa4c590e2d" width="60%"/><br>
**ê²°ê³¼**<br>
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/449e3161-9d7e-43be-bee6-b09560df9175" width="60%"/><br>
left joinì„ joinìœ¼ë¡œ ë°”ê¾¸ê²Œ ë˜ë©´?
- join ëŒ€ìƒì— ì—†ëŠ”(=teamB) ê²ƒë“¤ì€ ì‚¬ë¼ì§€ê²Œ ëœë‹¤.

<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/9252a495-1154-4556-99b6-787c3cc74125" width="60%"/><br>
> ğŸ§‘ğŸ»â€ğŸ« on ì ˆì„ í™œìš©í•´ ì¡°ì¸ ëŒ€ìƒì„ í•„í„°ë§ í•  ë•Œ ì™¸ë¶€ì¡°ì¸ì´ ì•„ë‹ˆë¼ ë‚´ë¶€ì¡°ì¸(inner join)ì„ ì‚¬ìš©í•˜ë©´<br>
> where ì ˆì—ì„œ í•„í„°ë§ í•˜ëŠ” ê²ƒê³¼ ê¸°ëŠ¥ì´ ë™ì¼í•˜ë‹¤. ë”°ë¼ì„œ on ì ˆì„ í™œìš©í•œ ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§ì„ ì‚¬ìš©í•  ë•Œ<br>
> ë‚´ë¶€ì¡°ì¸ ì´ë©´ ìµìˆ™í•œ where ì ˆë¡œ í•´ê²°í•˜ê³  ì •ë§ ì™¸ë¶€ì¡°ì¸ì´ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì.  

<br>

2. ì—°ê´€ê´€ê³„ ì—†ëŠ” ì—”í‹°í‹° ì™¸ë¶€ ì¡°ì¸
- ì˜ˆ : íšŒì›ì˜ ì´ë¦„ê³¼ íŒ€ì˜ ì´ë¦„ì´ ê°™ì€ ëŒ€ìƒ ì™¸ë¶€ ì¡°ì¸
- JPQL : select m, t from Member m left join Team t on m.username = t.name
- SQL : select m.*, t.* from Member m left join Team t on m.username = t.name
```java
    @Test
public void join_on_no_relation() {
        em.persist(new Member("teamA"));
        em.persist(new Member("teamB"));
        em.persist(new Member("teamC"));

        List<Tuple> result = queryFactory
            .select(member, team)
            .from(member)
            .leftJoin(team).on(member.username.eq(team.name))
            .fetch();

        for (Tuple tuple : result) {
            System.out.println("t=" + tuple);
        }
}
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/f5799c6c-fbf2-4cc6-a82d-bffa8fe2c01f" width="60%"/><br>
> ğŸ§‘ğŸ»â€ğŸ« ìœ„ì˜ sqlì„ ë³´ë©´ 1ë²ˆì—ì„œ idì— ëŒ€í•œ ì¡°ê±´ì ˆì´ ì‚¬ë¼ì§„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br>
> ì£¼ì˜! ë¬¸ë²•ì„ ì˜ ë´ì•¼ í•œë‹¤. leftJoin() ë¶€ë¶„ì— ì¼ë°˜ ì¡°ì¸ê³¼ ë‹¤ë¥´ê²Œ ì—”í‹°í‹° í•˜ë‚˜ë§Œ ë“¤ì–´ê°„ë‹¤.
- ì¼ë°˜ì¡°ì¸: .leftJoin(member.team, team).on(member.username.eq(team.name)) ì¸ ê²½ìš°ì—ëŠ” idì¡°ê±´ì ˆ í¬í•¨ O
- onì¡°ì¸: .leftJoin(team).on(member.username.eq(team.name)) ì¸ ê²½ìš°ì—ëŠ” idì¡°ê±´ì ˆ í¬í•¨ X

<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/ebb5eb7e-cdee-4eb6-856d-82f433209efc" width="60%"/><br>
ìœ„ì˜ leftjoin()ì„ join()ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ê²€ìƒ‰ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ëŒ€ìƒë§Œ ê°€ì ¸ì˜¨ë‹¤.
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/b08fe61d-7031-4456-ad6c-5ceeb2b8bf89" width="60%"/><br>

<br>

## ì¡°ì¸ - í˜ì¹˜ ì¡°ì¸
í˜ì¹˜ ì¡°ì¸ì€ SQLì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì€ ì•„ë‹ˆë‹¤. SQLì¡°ì¸ì„ í™œìš©í•´ì„œ ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ SQL **í•œë²ˆì— ì¡°íšŒ**í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. ì£¼ë¡œ ì„±ëŠ¥ ìµœì í™”ì— ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.
```java
    @PersistenceUnit // EntityManagerFactoryì„ ìœ„í•œ ì–´ë…¸í…Œì´ì…˜
    EntityManagerFactory emf;

    @Test
    public void fetchJoinNo() throws Exception {
        em.flush();
        em.clear();

        Member findMember = queryFactory
                .selectFrom(member)
                .where(member.username.eq("member1"))
                .fetchOne();

        // teamì´ ì´ë¯¸ ë¡œë”©ëœ entityì¸ì§€ ì•„ë‹Œì§€ë¥¼ ê²€ì¦í•˜ëŠ” Util
        boolean loaded = emf.getPersistenceUnitUtil().isLoaded(findMember.getTeam());
        
        assertThat(loaded).as("í˜ì¹˜ ì¡°ì¸ ë¯¸ì ìš©").isEqualTo(false);
    }

    @Test
    public void fetchJoinUse() throws Exception {
        em.flush();
        em.clear();

        Member findMember = queryFactory
                .selectFrom(member)
                .join(member.team, team).fetchJoin()// íŒ¨ì¹˜ ì¡°ì¸
                .where(member.username.eq("member1"))
                .fetchOne();

        // teamì´ ì´ë¯¸ ë¡œë”©ëœ entityì¸ì§€ ì•„ë‹Œì§€ë¥¼ ê²€ì¦í•˜ëŠ” Util
        boolean loaded = emf.getPersistenceUnitUtil().isLoaded(findMember.getTeam());
        
        assertThat(loaded).as("í˜ì¹˜ ì¡°ì¸ ì ìš©").isEqualTo(true);
    }
```
- í˜ì¹˜ ì¡°ì¸ ë¯¸ì ìš© : ì§€ì—°ë¡œë”©ìœ¼ë¡œ Member, Team SQL ì¿¼ë¦¬ ê°ê° ì‹¤í–‰
- í˜ì¹˜ ì¡°ì¸ ì ìš© : ì¦‰ì‹œë¡œë”©ìœ¼ë¡œ Member, Team SQL ì¿¼ë¦¬ ì¡°ì¸ìœ¼ë¡œ í•œë²ˆì— ì¡°íšŒ

ì‚¬ìš©ë°©ë²•
- join(), leftJoin() ë“± ì¡°ì¸ ê¸°ëŠ¥ ë’¤ì— fetchJoin() ì´ë¼ê³  ì¶”ê°€í•˜ë©´ ëœë‹¤.
> ì°¸ê³ : í˜ì¹˜ ì¡°ì¸ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ JPA ê¸°ë³¸í¸ì´ë‚˜, í™œìš©2í¸ì„ ì°¸ê³ í•˜ì

<br>

## ì„œë¸Œ ì¿¼ë¦¬
```
com.querydsl.jpa.JPAExpressions 
```
ì„œë¸Œ ì¿¼ë¦¬ì˜ ê²½ìš° aliasê°€ ê²¹ì¹˜ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì— new Qxxx("")ë¥¼ í†µí•´ aliasë¥¼ ì§€ì •í•´ì¤˜ì•¼ í•œë‹¤.
### ì„œë¸Œ ì¿¼ë¦¬ eq ì‚¬ìš©
```java
    /**
     * ë‚˜ì´ê°€ ê°€ì¥ ë§ì€ íšŒì› ì¡°íšŒ
     */
    @Test
    public void subQuery() {
        QMember memberSub = new QMember("memberSub");

        List<Member> result = queryFactory
            .selectFrom(member)
            .where(member.age.eq(
                JPAExpressions
                    .select(memberSub.age.max())
                    .from(memberSub)
            ))
            .fetch();

        assertThat(result).extracting("age")
            .containsExactly(40);
    }
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/82d04052-4112-4887-8146-de629a7cfc44" width="60%"/><br>

### ì„œë¸Œ ì¿¼ë¦¬ goe ì‚¬ìš©
```java
    /**
     * ë‚˜ì´ê°€ í‰ê·  ë‚˜ì´ ì´ìƒì¸ íšŒì›
     */
    @Test
    public void subQueryGoe() {
        // ì„œë¸Œ ì¿¼ë¦¬ goe(í¬ê±°ë‚˜ ê°™ìŒ) ì‚¬ìš©
        QMember memberSub = new QMember("memberSub");

        List<Member> result = queryFactory
            .selectFrom(member)
            .where(member.age.goe(
                JPAExpressions
                    .select(memberSub.age.avg())
                    .from(memberSub)
            ))
            .fetch();

        assertThat(result).extracting("age")
            .containsExactly(30, 40);
    }
```

### ì„œë¸Œì¿¼ë¦¬ ì—¬ëŸ¬ ê±´ ì²˜ë¦¬ in ì‚¬ìš©
```java
    /**
     * 10ì‚´ ì´ˆê³¼ì¸ íšŒì›
     */
    @Test
    public void subQueryIn() {
        QMember memberSub = new QMember("memberSub");

        List<Member> result = queryFactory
            .selectFrom(member)
            .where(member.age.in(
                JPAExpressions
                    .select(memberSub.age)
                    .from(memberSub)
                    .where(memberSub.age.gt(10)) // gt(~ë³´ë‹¤ í¼)
            ))
            .fetch();

        assertThat(result).extracting("age")
            .containsExactly(20, 30, 40);
    }
```
### select ì ˆì— subquery
```java
    /**
     * íšŒì›ë“¤ì˜ í‰ê·  ë‚˜ì´ ì¶œë ¥
     */
@Test
public void SelectSubQuery() {
        // select ì ˆì— subquery
        QMember memberSub = new QMember("memberSub");

        List<Tuple> fetch = queryFactory
            .select(
                    member.username,
                    select(memberSub.age.avg())
                            .from(memberSub)
        )
        .from(member)
        .fetch();

        for (Tuple tuple : fetch) {
            System.out.println("username = " + tuple.get(member.username));
            System.out.println("age = " + tuple.get(select(memberSub.age.avg()).from(memberSub)));
        }
}
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/c36abf92-ce67-4984-a01e-80cc2f40112e" width="60%"/><br>
**ê²°ê³¼**<br>
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/de449bce-11d1-4d3d-84bc-b97eaefa1339" width="30%"/><br>

**from ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ í•œê³„**<br>
JPA JPQL ì„œë¸Œì¿¼ë¦¬ì˜ í•œê³„ì ìœ¼ë¡œ from ì ˆì˜ ì„œë¸Œì¿¼ë¦¬(ì¸ë¼ì¸ ë·°)ëŠ” ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.<br> 
ë‹¹ì—°íˆ Querydsl ë„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì´ë²„ë„¤ì´íŠ¸ êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ select ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ëŠ” ì§€ì›í•œë‹¤.<br> 
Querydslë„ í•˜ ì´ë²„ë„¤ì´íŠ¸ êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ select ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì§€ì›í•œë‹¤.<br>

**from ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ í•´ê²°ë°©ì•ˆ**
1. ì„œë¸Œì¿¼ë¦¬ë¥¼ joinìœ¼ë¡œ ë³€ê²½í•œë‹¤. (ê°€ëŠ¥í•œ ìƒí™©ë„ ìˆê³ , ë¶ˆê°€ëŠ¥í•œ ìƒí™©ë„ ìˆë‹¤.)
2. ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¿¼ë¦¬ë¥¼ 2ë²ˆ ë¶„ë¦¬í•´ì„œ ì‹¤í–‰í•œë‹¤.
3. nativeSQLì„ ì‚¬ìš©í•œë‹¤.

<br>

## Case ë¬¸
select, ì¡°ê±´ì ˆ(where), order byì—ì„œ ì‚¬ìš© ê°€ëŠ¥
### ë‹¨ìˆœí•œ ì¡°ê±´
```java
    @Test
    public void basicCase() {
        List<String> result = queryFactory
            .select(member.age
                .when(10).then("ì—´ì‚´")
                .when(20).then("ìŠ¤ë¬´ì‚´")
                .otherwise("ê¸°íƒ€"))
            .from(member)
            .fetch();

        for(String s : result) {
            System.out.println("s = " + s);
        }
    }
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/51b6f813-b1e6-45d9-887c-be745414cb54" width="40%"/><br>

### ë³µì¡í•œ ì¡°ê±´
```java
   @Test
    public void complexCase() {
        List<String> result = queryFactory
            .select(new CaseBuilder()
                .when(member.age.between(0, 20)).then("0~20ì‚´")
                .when(member.age.between(21, 30)).then("21~30ì‚´")
                .otherwise("ê¸°íƒ€"))
            .from(member)
            .fetch();

        for (String s : result) {
            System.out.println("s = " + s);
        }
    }
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/0e2cdfe1-a310-431b-96e1-303225880739" width="40%"/><br>

### orderByì—ì„œ Case ë¬¸ í•¨ê»˜ ì‚¬ìš©í•˜ê¸° ì˜ˆì œ
ì˜ˆë¥¼ ë“¤ì–´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì„ì˜ì˜ ìˆœì„œë¡œ íšŒì›ì„ ì¶œë ¥í•˜ê³  ì‹¶ë‹¤ë©´?
1. 0 ~ 30ì‚´ì´ ì•„ë‹Œ íšŒì›ì„ ê°€ì¥ ë¨¼ì € ì¶œë ¥
2. 0 ~ 20ì‚´ íšŒì› ì¶œë ¥
3. 21 ~ 30ì‚´ íšŒì› ì¶œë ¥

```java
    @Test
    public void complexCase2() {

        NumberExpression<Integer> rankPath = new CaseBuilder()
            .when(member.age.between(0, 20)).then(2)
            .when(member.age.between(21, 30)).then(1)
            .otherwise(3);

        List<Tuple> result = queryFactory
            .select(member.username, member.age, rankPath)
            .from(member)
            .orderBy(rankPath.desc())
            .fetch();

        for (Tuple tuple : result) {
            String username = tuple.get(member.username);
            Integer age = tuple.get(member.age);
            Integer rank = tuple.get(rankPath);
            System.out.println("username = " + username + " age = " + age + " rank = " + rank);
        }
    }
```
Querydslì€ ìë°” ì½”ë“œë¡œ ì‘ì„±í•˜ê¸° ë•Œë¬¸ì— rankPath ì²˜ëŸ¼ ë³µì¡í•œ ì¡°ê±´ì„ ë³€ìˆ˜ë¡œ ì„ ì–¸í•´ì„œ select ì ˆ, orderBy ì ˆì—ì„œ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br>
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/a7ffa195-b85a-42da-af24-d17fb054b7b8" width="40%"/><br>

<br>

## ìƒìˆ˜, ë¬¸ì ë”í•˜ê¸°
### ìƒìˆ˜
ìƒìˆ˜ê°€ í•„ìš”í•˜ë©´ `Expressions.constant(xxx)` ì‚¬ìš©
```java
    @Test
    public void constant() {
        List<Tuple> result = queryFactory
            .select(member.username, Expressions.constant("A"))
            .from(member)
            .fetch();

        for (Tuple tuple : result) {
            System.out.println("tuple = " + tuple);
        }
    }
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/31c3757f-2562-4187-9db9-b9e9d1af8177" width="30%"/><br>
ìœ„ì™€ ê°™ì´ ìµœì í™”ê°€ ê°€ëŠ¥í•˜ë©´ SQLì— constant ê°’ì„ ë„˜ê¸°ì§€ ì•ŠëŠ”ë‹¤. ìƒìˆ˜ë¥¼ ë”í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ìµœì í™”ê°€ ì–´ë ¤ìš°ë©´ SQLì— constant ê°’ì„ ë„˜ê¸´ë‹¤.

### ë¬¸ì ë”í•˜ê¸° concat
```java
   @Test
    public void concat() {
        List<String> result = queryFactory
            .select(member.username.concat("_").concat(member.age.stringValue()))
            .from(member)
            .where(member.username.eq("member1"))
            .fetch();

        for (String s : result) {
            System.out.println("s = " + s);
        }
    }
```
<img src="https://github.com/hyewon218/kim-querydsl/assets/126750615/bea23878-e52b-42e3-9c51-d63e56440078" width="30%"/><br>
> ì°¸ê³  : member.age.stringValue() ë¶€ë¶„ì´ ì¤‘ìš”í•œë°, ë¬¸ìê°€ ì•„ë‹Œ ë‹¤ë¥¸ íƒ€ì…ë“¤ì€ stringValue() ë¡œ ë¬¸ìë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤. ì´ ë°©ë²•ì€ ENUMì„ ì²˜ë¦¬í•  ë•Œë„ ìì£¼ ì‚¬ìš©í•œë‹¤.